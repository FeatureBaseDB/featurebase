syntax = "proto3";

package internal;

message DBMeta {
	string ColumnLabel = 1;
	string TimeQuantum = 2;
}

message FrameMeta {
	string RowLabel = 1;
	bool InverseEnabled = 2;
	string CacheType = 3;
	uint32 CacheSize = 4;
	string TimeQuantum = 5;
}

message ImportResponse {
	string Err = 1;
}

message BlockDataRequest {
	string DB = 1;
	string Frame = 2;
	string View = 5;
	uint64 Slice = 4;
	uint64 Block = 3;
}

message BlockDataResponse {
	repeated uint64 RowIDs = 1;
	repeated uint64 ColumnIDs = 2;
}

message Cache {
	repeated uint64 IDs = 1;
}

message MaxSlicesResponse {
    map<string, uint64> MaxSlices = 1;
}

message CreateSliceMessage {
    string DB = 1;
    uint64 Slice = 2;
}

message DeleteDBMessage {
    string DB = 1;
}

message CreateDBMessage {
    string DB = 1;
    DBMeta Meta = 2;
}

message CreateFrameMessage {
    string DB = 1;
    string Frame = 2;
    FrameMeta Meta = 3;
}

message DeleteFrameMessage {
    string DB = 1;
    string Frame = 2;
}

message Frame {
    string Name = 1;
    FrameMeta Meta = 2;
}

message DB {
    string Name = 1;
    DBMeta Meta = 2;
    uint64 MaxSlice = 3;
    repeated Frame Frames = 4;
}

message NodeState {
    string Host = 1;
    string State = 2;
    repeated DB DBs = 3;
}
